config:
    name: 登录测试用例
    variables:
      phoneNum: ${ENV(phoneNum)}
      verifyCode: ${ENV(verifyCode)}
    base_url: ${ENV(base_url)}

teststeps:
-   name: 获取验证码
    api: api/WEB/account/GET_VeriCode.yml

-   name: 登录
    api: api/WEB/auth/POST_Login.yml
    extract:
        - access_token: content.access_token
        - refresh_token: content.refresh_token

-   name: 获取账户信息
    api: api/WEB/account/GET_Account.yml
    setup_hooks:
        - ${refresh_token($access_token, $refresh_token)}
    validate:
    - eq: [status_code, 200]
    - eq: [content.userId, '3479189832092106759']
    - eq: [content.login, $phoneNum]
    - eq: [content.phoneNum, $phoneNum]
    - eq: [content.tenantCode, '1001']
