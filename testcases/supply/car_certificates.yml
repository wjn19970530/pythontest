config:
    name: 创建车辆并设置合格证信息 testcases/supply/car_certificates.yml
    variables:
      phoneNum: ${ENV(phoneNum)}
      verifyCode: ${ENV(verifyCode)}
      access_token: ${get_token(access_token)}
      refresh_token: ${get_token(refresh_token)}
      number: ${generate_number()}
    base_url: ${ENV(base_url)}

teststeps:
-   name: 保存新的车辆基本信息
    testcase: testcases/supply/create_car.yml
    variables:
      engineNumber: ${add($number, 2)}
    extract:
      carId: content.carId

-   name: 上传图片 upload
    api: api/file/POST_Upload.yml
    variables:
      file_path: data/img/car03.jpg
      file_name: car03.jpg
      file_type: image/jpg
    extract:
      fileurl: (.*)

-   name: 保存车辆合格证 /supplychain/api/car-certificates
    api: api/supplychain/POST_CarCertificates.yml
    variables:
      carId: $carId
    validate:
    - eq: [status_code, 201]
    - eq: [content.carId, $carId]
    - eq: [content.deleteStatus, 0]


