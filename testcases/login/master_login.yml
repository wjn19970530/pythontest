config:
    name: master分支登录  testcases/login/master_login.yml
    variables:
        phoneNum: ${ENV(sellerPhoneNum)}

teststeps:
  - name: 登录前获取transactionNo  api/account/GET_TransactionNo.yml
    api: api/account/GET_TransactionNo.yml
    validate:
      - eq: [status_code,200]
    extract:
        transactionNo: content.transactionNo
    output:
      - transactionNo

  - name: 登录  api/auth/POST_Login_master.yml
    api: api/auth/POST_Login_master.yml
    variables:
        transactionNo: ${transactionNo}
        verifyCaptcha: ${sql_get_verify_code($transactionNo)}
    validate:
      - eq: [status_code,200]
    teardown_hooks:
      - ${response_refresh_token($response, $endpoint)}

  - name: 获取账户信息  api/account/GET_Account.yml
    api: api/account/GET_Account.yml
    validate:
      - eq: [status_code, 200]
      - eq: [content.login, $phoneNum]
      - eq: [content.phoneNum, $phoneNum]